<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="height=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=0">
		<title>1024</title>
		<style>
			*{
				padding: 0px;
				margin: 0px;
			}
			html, body{
				width: 100%;
				height: 100%;
			}
			.btn {
				width: 30px;
				height: 30px;
				border-radius: 30px;
				background-color: red;
				float: left;
				border: 1px #000 solid;
			}
		</style>
	</head>
	<body>
		<div style="width: 100%;height: 30px;">
			条件选择
		</div>
		<div style="width: 100%;height: 70px;">
			<div class="btn" result="" style="background-color: white;margin-left:5px;" onclick="btnclick(0)"></div>
			<div class="btn" result="" style="background-color: white;margin-left:5px;display: none;" onclick="btnclick(1)"></div>
			<div class="btn" result="" style="background-color: white;margin-left:5px;display: none;" onclick="btnclick(2)"></div>
			<div class="btn" result="" style="background-color: white;margin-left:5px;display: none;" onclick="btnclick(3)"></div>
			<div class="btn" result="" style="background-color: white;margin-left:5px;display: none;" onclick="btnclick(4)"></div>
			<div class="btn" result="" style="background-color: white;margin-left:5px;display: none;" onclick="btnclick(5)"></div>
			<div class="btn" result="" style="background-color: white;margin-left:5px;display: none;" onclick="btnclick(6)"></div>
			<div class="btn" result="" style="background-color: white;margin-left:5px;display: none;" onclick="btnclick(7)"></div>
			<div class="btn" result="" style="background-color: white;margin-left:5px;display: none;" onclick="btnclick(8)"></div>
			<div class="btn" result="" style="background-color: white;margin-left:5px;display: none;" onclick="btnclick(9)"></div>
		</div>
		<div style="width: 100%;height: 30px;">
			结果
		</div>
		<div id="package" style="width: 100%;height: calc(100% - 130px);">
			
		</div>
	</body>
	<script src="./data.js"></script>
	<script type="text/javascript">
		let packageEl = document.getElementById("package");
		let condition = [null, null, null, null, null, null, null, null, null, null];
		
		function btnclick(index){
			condition[index] = !condition[index];
			
			let btnEl = document.getElementsByClassName("btn")[index];
			let btnElPerv = document.getElementsByClassName("btn")[index < condition.length - 1 ? index + 1 : index];
			btnElPerv.style.display = "block";
			btnEl.setAttribute("result", condition[index]);
			if(condition[index] == true){
				btnEl.style.backgroundColor = "green";
			} else {
				btnEl.style.backgroundColor = "red";
			}
			
			search();
		}
		
		function search(){
			packageEl.innerHTML = "";
			let conditionStr = "";
			for (var i = 0; i < condition.length; i++) {
				let item = condition[i];
				if(item != null){
					conditionStr += item + ",";
				}
			}
			console.log(conditionStr);
			conditionStr = conditionStr.slice(0, conditionStr.length - 1);
			let htmlStr = '';
			let index = 1;
			for (let i = 0; i < data.length; i++) {
				let arr = data[i];
				let itemJson = JSON.stringify(arr);
				let itemStr = itemJson.slice(1, conditionStr.length + 1);
				if(itemStr == conditionStr){
					htmlStr += '<div style="width: 100%;height: 70px;"><div class="btn" result="'+ arr[0] +'" style="line-height:30px;color:#FFFFFF;text-align:center;margin-left:5px;background-color: '+ (arr[0] == true ? 'green' : 'red') +';">'+ index +'</div>'+
					'<div class="btn" result="'+ arr[1] +'" style="margin-left:5px;background-color: '+ (arr[1] == true ? 'green' : 'red') +';"></div>'+
					'<div class="btn" result="'+ arr[2] +'" style="margin-left:5px;background-color: '+ (arr[2] == true ? 'green' : 'red') +';"></div>'+
					'<div class="btn" result="'+ arr[3] +'" style="margin-left:5px;background-color: '+ (arr[3] == true ? 'green' : 'red') +';"></div>'+
					'<div class="btn" result="'+ arr[4] +'" style="margin-left:5px;background-color: '+ (arr[4] == true ? 'green' : 'red') +';"></div>'+
					'<div class="btn" result="'+ arr[5] +'" style="margin-left:5px;background-color: '+ (arr[5] == true ? 'green' : 'red') +';"></div>'+
					'<div class="btn" result="'+ arr[6] +'" style="margin-left:5px;background-color: '+ (arr[6] == true ? 'green' : 'red') +';"></div>'+
					'<div class="btn" result="'+ arr[7] +'" style="margin-left:5px;background-color: '+ (arr[7] == true ? 'green' : 'red') +';"></div>'+
					'<div class="btn" result="'+ arr[8] +'" style="margin-left:5px;background-color: '+ (arr[8] == true ? 'green' : 'red') +';"></div>'+
					'<div class="btn" result="'+ arr[9] +'" style="margin-left:5px;background-color: '+ (arr[9] == true ? 'green' : 'red') +';"></div></div>';
					index++;
				}
			}
			packageEl.innerHTML = packageEl.innerHTML + htmlStr + "<br/><br/>";
		}
	</script>
</html>
